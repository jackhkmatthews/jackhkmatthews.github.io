---
layout: post
title: "Key Karaoke"
excerpt: "Examples and code for displaying images in posts."
image: "https://cloud.githubusercontent.com/assets/20629455/23711595/338e6330-0418-11e7-92b2-2c07c82a7845.png"
tags:
  - JavaScript
  - jQuery
  - HTML
  - CSS
---

## Brief

To produce a browser game using the HTML, CSS, JavaScript and jQuery topics covered during the first two weeks of the General Assembly Web Development Immersive course.

## Overview

I decided to create a music based typing game similar to karaoke where the player can select a song of their choice to test their typing ability.  Hence combining my musical interests with a want to improve my typing.

The player is continually displayed the number of characters hit and missed and a completion rate. The aim of the game is to keep the completion rate as near as possible to 100%.

## Screenshots

### Home Page
![screen shot 2016-12-14 at 10 03 31](https://cloud.githubusercontent.com/assets/20629455/21177873/f161d160-c1e4-11e6-82c5-96d69390f574.png)

### 'Chilled' level instance with correctly typed characters highlighted
![screen shot 2016-12-14 at 10 04 11](https://cloud.githubusercontent.com/assets/20629455/21177872/f1619f42-c1e4-11e6-81b8-10da088712ae.png)

### 'Impossible' instance
![screen shot 2016-12-14 at 10 04 53](https://cloud.githubusercontent.com/assets/20629455/21177874/f16203b0-c1e4-11e6-94fb-7629d2dff81c.png)

### Import instance
![screen shot 2016-12-14 at 10 05 08](https://cloud.githubusercontent.com/assets/20629455/21177875/f16704b4-c1e4-11e6-927d-08815ac2d429.png)

## Mechanics

### On 'submit':

1. The html lyric string is split by  `<br>` into individual lines and stored in an array.
2. Common unwanted elements (e.g '[Chorus]') are removed.
3. Each element (line) in the array is split into characters.
4. Each character is placed into a span.
5. Each line of spans is stored in an array and also appended to individual line divs.
6. The youtube URL is converted into a HTML video tag.

### On 'play':

1. The previously stored line divs are displayed in the waterfall container roughly in time with the song.
2. When each line is displayed it is added to a linesOnScreen array.
3. When a line reaches a certain position on screen it is removed from the DOM and from the linesOnScreen array.

### On 'key press':

1. Each line has its own current character index.
2. Each character at this current character index for each line is compared to the ascii code of the key pressed.
3. If the character matches a class of correct is added to the appropriate span tag and the character is highlighted.


## Wins

I am very happy with the key detection which allows the Player to attempt any line on screen at any time and correctly attributed the appropriate style to each character.

Furthermore, the game has been written using an object orientated approach.  This allowed for multiple instances of the game (Chilled, Impossible and Import) to be generated by the JavaScript code when an item in the navigation bar is clicked and would allow for significantly different styling and content between instances in the future.

I am also happy with the fiddly but nearly bug free Import instance which allows the player to select a song of their choice to type along to.

## Known issues to be addressed

1. Although simple the styling feels a little chaotic and lacks cohesion and polish.
2. If two lines have the same character next in their current character index both characters will be highlighted as correct when the Player types.
3. Sometimes the HTML video tag produced from the import form does not load in time.
4. Although Chilled mode is functional on mobile devices the game mostly breaks when opened on a phone.
5. The instances (Chilled, Imposible and Import) do not fully reset when the player navigates from one to another and back again.  This included animation, completion rates and lines on screen.
6. The code is too long for the functionality present.


## Features which could be added

1. Cycling the colour scheme from an array on each new visit.
2. Different colour schemes for each of the three instances.
3. Use of GENIUS lyric search API to improve ease of use of the import functionality.
4. A social media sharing button to share scores between friends.
5. An animation to signify the end of the song and the players typing ability.
6. Fully responsive design.
7. Player health to incentivise better performance.
8. Animation and styling when the player types incorrectly.
